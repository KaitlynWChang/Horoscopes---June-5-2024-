(()=>{var e={487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},1012:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],o=0;o<e.length;o+=3)for(var r=e[o]<<16|e[o+1]<<8|e[o+2],i=0;i<4;i++)8*o+6*i<=8*e.length?n.push(t.charAt(r>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],o=0,r=0;o<e.length;r=++o%4)0!=r&&n.push((t.indexOf(e.charAt(o-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(o))>>>6-2*r);return n}},e.exports=n},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:(e,t,n)=>{var o,r,i,a,s;o=n(1012),r=n(487).utf8,i=n(8738),a=n(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=o.bytesToWords(e),l=8*e.length,d=1732584193,u=-271733879,c=-1732584194,p=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var m=s._ff,y=s._gg,w=s._hh,b=s._ii;for(h=0;h<n.length;h+=16){var g=d,v=u,j=c,f=p;d=m(d,u,c,p,n[h+0],7,-680876936),p=m(p,d,u,c,n[h+1],12,-389564586),c=m(c,p,d,u,n[h+2],17,606105819),u=m(u,c,p,d,n[h+3],22,-1044525330),d=m(d,u,c,p,n[h+4],7,-176418897),p=m(p,d,u,c,n[h+5],12,1200080426),c=m(c,p,d,u,n[h+6],17,-1473231341),u=m(u,c,p,d,n[h+7],22,-45705983),d=m(d,u,c,p,n[h+8],7,1770035416),p=m(p,d,u,c,n[h+9],12,-1958414417),c=m(c,p,d,u,n[h+10],17,-42063),u=m(u,c,p,d,n[h+11],22,-1990404162),d=m(d,u,c,p,n[h+12],7,1804603682),p=m(p,d,u,c,n[h+13],12,-40341101),c=m(c,p,d,u,n[h+14],17,-1502002290),d=y(d,u=m(u,c,p,d,n[h+15],22,1236535329),c,p,n[h+1],5,-165796510),p=y(p,d,u,c,n[h+6],9,-1069501632),c=y(c,p,d,u,n[h+11],14,643717713),u=y(u,c,p,d,n[h+0],20,-373897302),d=y(d,u,c,p,n[h+5],5,-701558691),p=y(p,d,u,c,n[h+10],9,38016083),c=y(c,p,d,u,n[h+15],14,-660478335),u=y(u,c,p,d,n[h+4],20,-405537848),d=y(d,u,c,p,n[h+9],5,568446438),p=y(p,d,u,c,n[h+14],9,-1019803690),c=y(c,p,d,u,n[h+3],14,-187363961),u=y(u,c,p,d,n[h+8],20,1163531501),d=y(d,u,c,p,n[h+13],5,-1444681467),p=y(p,d,u,c,n[h+2],9,-51403784),c=y(c,p,d,u,n[h+7],14,1735328473),d=w(d,u=y(u,c,p,d,n[h+12],20,-1926607734),c,p,n[h+5],4,-378558),p=w(p,d,u,c,n[h+8],11,-2022574463),c=w(c,p,d,u,n[h+11],16,1839030562),u=w(u,c,p,d,n[h+14],23,-35309556),d=w(d,u,c,p,n[h+1],4,-1530992060),p=w(p,d,u,c,n[h+4],11,1272893353),c=w(c,p,d,u,n[h+7],16,-155497632),u=w(u,c,p,d,n[h+10],23,-1094730640),d=w(d,u,c,p,n[h+13],4,681279174),p=w(p,d,u,c,n[h+0],11,-358537222),c=w(c,p,d,u,n[h+3],16,-722521979),u=w(u,c,p,d,n[h+6],23,76029189),d=w(d,u,c,p,n[h+9],4,-640364487),p=w(p,d,u,c,n[h+12],11,-421815835),c=w(c,p,d,u,n[h+15],16,530742520),d=b(d,u=w(u,c,p,d,n[h+2],23,-995338651),c,p,n[h+0],6,-198630844),p=b(p,d,u,c,n[h+7],10,1126891415),c=b(c,p,d,u,n[h+14],15,-1416354905),u=b(u,c,p,d,n[h+5],21,-57434055),d=b(d,u,c,p,n[h+12],6,1700485571),p=b(p,d,u,c,n[h+3],10,-1894986606),c=b(c,p,d,u,n[h+10],15,-1051523),u=b(u,c,p,d,n[h+1],21,-2054922799),d=b(d,u,c,p,n[h+8],6,1873313359),p=b(p,d,u,c,n[h+15],10,-30611744),c=b(c,p,d,u,n[h+6],15,-1560198380),u=b(u,c,p,d,n[h+13],21,1309151649),d=b(d,u,c,p,n[h+4],6,-145523070),p=b(p,d,u,c,n[h+11],10,-1120210379),c=b(c,p,d,u,n[h+2],15,718787259),u=b(u,c,p,d,n[h+9],21,-343485551),d=d+g>>>0,u=u+v>>>0,c=c+j>>>0,p=p+f>>>0}return o.endian([d,u,c,p])})._ff=function(e,t,n,o,r,i,a){var s=e+(t&n|~t&o)+(r>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,n,o,r,i,a){var s=e+(t&o|n&~o)+(r>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,n,o,r,i,a){var s=e+(t^n^o)+(r>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,n,o,r,i,a){var s=e+(n^(t|~o))+(r>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=o.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?a.bytesToString(n):o.bytesToHex(n)}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const{IDLE_TIME:e,JAM_URL:t,RUFUS_URL:o="",SENTRY_DSN:r,SENTRY_ENV:i}={IDLE_TIME:"120",JAM_URL:"https://jam.hearstapps.com",RUFUS_URL:"https://preferencecenter.hearstmags.com",SENTRY_DSN:"https://cce3aed2efd74e668893f184a39c8290@o31459.ingest.sentry.io/5395964",SENTRY_ENV:"kubeprod"},a={blockerTemplates:["journey-blocker","journey-inline-blocker","journey-modal-blocker"],cdsOptIn:"H",cdsOptOut:"N",collapseScrollThreshold:100,daysToExpireHiddenCookie:365,daysToExpirePaywallView:30,daysToExpireViewsCookie:365,daysToExpireOptimizelyUserIdCookie:2,hoursToHideModalNewsletterAfterView:168,hoursToHideNewsletter:8760,hiddenCookieName:"journeyHidden",thankYouContainerSecToHide:4,hiddenCookieTemplates:["journey-inline-newsletter","journey-modal-newsletter","journey-collapsible-newsletter","journey-full-width-newsletter","journey-slim-banner"],idleTime:window.Number.parseInt(e,10),inViewThreshold:.2,jamUrl:t,journeyCompletedStatus:"completed",lastActionPromotionCookie:"journey-last-action",membershipAttributionCookie:"membership_attribution",newsletterIsIneligibleToMove:"ineligible_moveup",newsletterIsMoved:"moved",promotionCookiesTemplates:["journey-collapsible-meter","journey-blocker","journey-inline-meter","journey-inline-blocker","journey-modal-meter","journey-modal-blocker","journey-slim-banner"],optimizelyUserIdCookie:"optimizely-user-id",journeyOptimizelyUserIdCookie:"journey-optimizely-user-id",rufusUrl:`${o.replace(/\/$/,"")}/api/preference/signup`,sentryDsn:r,sentryEnv:i,subxExcludedTemplates:["journey-blocker","journey-inline-blocker","journey-modal-blocker","journey-collapsible-meter","journey-inline-meter","journey-modal-meter","journey-collapsible-newsletter","journey-content-gate"],landingIncludedTemplates:["journey-slim-banner"],movableNewsletterDisplayTypes:["listicle","standard-article","longform-article"],viewsCookieName:"journeyViews"},s=e=>{if(!document.cookie.length)return null;const t=document.cookie.split(";").find((t=>0===t.trim().indexOf(e)));return t?t.split("=")[1]:null},l=e=>{try{const t=s(e);return t?JSON.parse(t):void 0}catch(e){}},d=function(e,t){let n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;if(o){const e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),n=e.toUTCString()}document.cookie=`${e}=${t};${n?`expires=${n};`:""}path=/;${r?`domain=${r};`:""}`},u=function(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;d(e,JSON.stringify(t),n,o)},c=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/ ;${t?`domain=${t};`:""}`},p=function(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;e=e&&e.split?e.split("."):[].concat(e);for(let n=0;n<e.length;n+=1)t=t?t[e[n]]:void 0;return void 0===t||""===t||null===t?n:t},h=(e,t,n)=>{if(!e||!t)return e;const o=encodeURIComponent(t),r=n?`=${encodeURIComponent(n)}`:"";return`${e}${e.includes("?")?"&":"?"}${o}${r}`},m=()=>{const{location:{hostname:e},__FRE:{cdn:t,env:n}={},__SITE:{domain:o}={}}=window;return t&&"feature"!==n?t&&o?new URL(o).hostname.replace("www.",""):e:e.split(".").slice(-2).join(".")},y=`.${m()}`,w=()=>{c(a.lastActionPromotionCookie,y)};class b extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.renderContent=this.renderContent.bind(this),this.dispatchJourneyClickedEvent=this.dispatchJourneyClickedEvent.bind(this)}get collapsed(){return"true"===this.getAttribute("data-collapsed")}get data(){if(!this._data){const e=this.shadow.querySelector("#journey-datalayer");this._data=e?JSON.parse(e.innerHTML):{}}return this._data}get displayMode(){return"inline"}get moveInlineNewsletterUp(){return this.getAttribute("move-inline-newsletter-up")}get isSignedIn(){return"true"===this.getAttribute("data-is-signed-in")}get logInLink(){return this._logInLink||(this._logInLink=this.shadow.querySelector(".login-link")),this._logInLink}get offerLink(){return this._linkBtn||(this._linkBtn=this.shadow.querySelector(".link-btn")),this._linkBtn}get optimizelyUserId(){return s(a.optimizelyUserIdCookie)}get journeyEventData(){const{logInLink:e,templateId:t,templateType:n,displayMode:o,data:r,view:i,moveInlineNewsletterUp:a,targetSelector:s,offerLink:l}=this,d={templateType:n,displayMode:o,...r},u=e||l;return t&&(d.templateId=t),i&&(d.view=i),a&&(d.moveInlineNewsletterUp=a),u&&(d.ctaText=u.textContent,d.destinationLink=u.href),s&&"journey-slim-banner"===n&&(d.tags={position:"#journey-topnav"===s?"top":"bottom"}),d}get journeyPromotionData(){const{templateId:e,templateType:t,data:{templateName:n,promoName:o,cdsTrackingCode:r,promoId:i}}=this;return{templateId:e,templateType:t,cdsTrackingCode:r,creativeName:n,promotionId:i,promotionName:o}}get links(){return this._links||(this._links=this.shadow.querySelectorAll("[data-link-type]")),this._links}get view(){const e=window.Number.parseInt(this.getAttribute("data-view"),10);return window.Number.isNaN(e)?null:e}get viewsRemaining(){return this.getAttribute("data-views-remaining")}get targetSelector(){return this.getAttribute("data-target-selector")}get templateId(){return this.getAttribute("data-template-id")}get templateType(){return"journey-template"}attachInViewObserver(){new IntersectionObserver(((e,t)=>{e[0].isIntersecting&&(t.disconnect(),window.dispatchEvent(new CustomEvent("journey-inview",{detail:this.journeyEventData})))}),{threshold:a.inViewThreshold}).observe(this)}addQueryParamToOfferLinks(){this.shadow.querySelectorAll('a[data-link-type="offer"], a[data-link-type="promo"]').forEach((e=>{const t=h(e.href,"mrefurl",window.location.pathname);e.href=this.optimizelyUserId?h(t,"optimizely_user_id",this.optimizelyUserId):t}))}connectedCallback(){this.fetchTemplateData().then(this.renderContent)}fetchTemplateData(){const e=this.getTemplateUrl();return e?fetch(e).then((e=>e.ok?e.text():Promise.resolve(null))):Promise.resolve(null)}dispatchJourneyDisplayedEvent(){const{journeyEventData:e}=this;window.dispatchEvent(new CustomEvent("journey-displayed",{detail:e}))}dispatchDataLayerEvent(){const{templateType:e}=this;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:`${e} displayed`})}dispatchJourneyClickedEvent(e){const t=e.currentTarget.getAttribute("data-link-type"),n={...this.journeyEventData,linkType:t};window.dispatchEvent(new CustomEvent("journey-clicked",{detail:n}))}dispatchJourneyClosedEvent(){window.dispatchEvent(new CustomEvent("journey-closed",{detail:this.journeyEventData}))}getAuthUrl(e){const{minorSource:t}=this.data,{optimizelyUserId:n}=this;let o=h("/auth/csrf","action",e);return o=h(o,"return_url",window.location.href),o=t?h(o,"minor_source",t):o,n?h(o,"optimizely_user_id",n):o}getTemplateUrl(){const{templateId:e,viewsRemaining:t}=this;if(!e)return null;let n=`https://jam.hearstapps.com/templates/${e}`;const o=new URLSearchParams(window.location.search).get("journey_draft");return o&&(n=h(n,"draftSlug",o)),t&&(n=h(n,"viewsRemaining",t)),n}preventStickyVideo(){const{targetSelector:e,displayMode:t,templateType:n}=this;"#journey-container"===e&&("inline"===t||"modal"===t&&("journey-modal-meter"===n||"journey-modal-blocker"===n))&&(window.pianoOfferDisplayed=!0,window.journeyOfferDisplayed=!0)}renderContent(e){if(e){const t=(new DOMParser).parseFromString(e,"text/html").documentElement;this.shadow.appendChild(t),this.addQueryParamToOfferLinks(),this.updateAuthUrls(),this.attachInViewObserver(),this.dispatchJourneyDisplayedEvent(),this.dispatchDataLayerEvent(),this.preventStickyVideo(),this.setLastActionPromotionCookie(),this.links.forEach((e=>{e.addEventListener("click",(t=>{this.dispatchJourneyClickedEvent(t),"offer"===e.getAttribute("data-link-type")&&this.setLastActionPromotionCookie(!0)}))}))}}setLastActionPromotionCookie(){let e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];a.promotionCookiesTemplates.includes(this.templateType)&&(e=>{const{display:t,wordCount:n,section:{prefix:o}={},subSection:{prefix:r}={},collection:i=[]}=p("HRST.article",window,{}),s=p("location.pathname",window),d={articleLength:n,displayType:t,section:o,subsection:r,mrefurl:s,collections:i.map((e=>{let{url:t}=e;return t})),contentSource:p("HRST.datalayer.contentSource",window,""),...e},{midTouchData:c}=l(a.lastActionPromotionCookie)||{},{isClick:h,cdsTrackingCode:m,templateType:w}=e;"journey-slim-banner"===w&&h?d.midTouchData={mrefurl:s,...e}:"journey-slim-banner"!==w&&c&&(d.midTouchData=c),u(a.lastActionPromotionCookie,d,.25,y),h&&u(a.membershipAttributionCookie,{mrefurl:s,cdsTrackingCode:m},.25,y)})({isClick:e,...this.journeyPromotionData})}updateAuthUrls(){const{isSignedIn:e}=this;this.shadow.querySelectorAll("a[data-link-type='login']").forEach((t=>e?void t.parentNode.removeChild(t):void(t.href=this.getAuthUrl("login")))),this.shadow.querySelectorAll("a[data-link-type='signup']").forEach((e=>{e.href=this.getAuthUrl("signup")}))}}const g=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=null;return o=>{clearTimeout(n),n=setTimeout((()=>e(o)),t)}},v=["ArrowUp","ArrowDown","Space","Home","End","PageUp","PageDown"],j=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;const n=g((o=>{let{key:r}=o;r&&!v.includes(r)||(window.removeEventListener("wheel",n),window.removeEventListener("touchmove",n),window.removeEventListener("keydown",n),((e,t)=>{const n=document.documentElement.scrollTop,o=g((()=>{Math.abs(document.documentElement.scrollTop-n)<t||(e(),window.removeEventListener("scroll",o))}));window.addEventListener("scroll",o)})(e,t))}));window.addEventListener("wheel",n,{once:!0}),window.addEventListener("touchmove",n,{once:!0}),window.addEventListener("keydown",n)};const f=e=>e&&Object.keys(e).length?void u(a.hiddenCookieName,e,a.daysToExpireHiddenCookie):void u(a.hiddenCookieName,null,0),E=()=>{const e=l(a.hiddenCookieName);if(!e)return null;let t=!1;const n=(new Date).getTime(),o=Object.entries(e).reduce(((e,o)=>{let[r,i]=o;return i>n?e[r]=i:t=!0,e}),{});return t&&f(o),o},S=e=>{const t=E();return t&&!!t[e]},C=(e,t)=>{const n=E()||{};n[e]=(new Date).getTime()+60*t*60*1e3,f(n)},k=(e,t,n)=>{const o=e.ok?t:n;return e.headers.get("content-type").includes("application/json")?void e.json().then((t=>o({...t,status:e.status}))).catch(n):void e.text().then((t=>o({message:t,status:e.status}))).catch(n)},_=(e,t)=>{let n;switch(typeof e){case"string":n=e;break;case"object":n=e.message||e.error}return n||t},T=function(e,t,n){let o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"INLINE",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"N"!==n;return new Promise(((i,s)=>{fetch(a.rufusUrl,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,preferences:[{preferenceId:t,optinValue:n}],analyticString1:"",analyticString2:"",majorSource:"WNL",minorSource:o,sendToEsp:r})}).then((e=>k(e,i,s))).catch(s)}))},x=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,I=e=>e.replace(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi,"[filtered]"),A=function(e,t){let o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};const i=(()=>{const e=x.exec(a.sentryDsn);if(!e)return null;const[t,n,o="",r,i="",s]=e.slice(1);let l="",d=s;const u=d.split("/");if(1<u.length&&(l=u.slice(0,-1).join("/"),d=u.pop()),d){const e=d.match(/^\d+/);e&&([d]=e)}return`${t}://${r}${i?`:${i}`:""}${l?`/${l}`:""}/api/${d}/store/?sentry_key=${encodeURIComponent(n)}&sentry_version=7`})();if(!i)return;const{referrer:s}=n.g.document||{},{userAgent:l}=n.g.navigator||{},d={...s&&{Referer:s},...l&&{"User-Agent":l}},u={breadcrumbs:void 0,contexts:{"JAM Data":r},environment:a.sentryEnv,event_id:"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=0|16*Math.random();return("x"===e?t:8|3&t).toString(16)})),exception:{values:[{type:"RendererError",value:t?I(t):"No error message",mechanism:{handled:!0,type:"generic"}}]},extra:{...o,url:window.location.href},level:"error",platform:"javascript",timestamp:Date.now()/1e3,transaction:e,request:{url:window.location.href,headers:d}};fetch(i,{body:JSON.stringify(u),method:"POST",referrerPolicy:"origin"})};var L=n(2568),N=n.n(L);class B extends b{constructor(){super(),this.handleSubmit=this.handleSubmit.bind(this),this.handleFocusIn=this.handleFocusIn.bind(this),this.visitorEmailCaptured=this.visitorEmailCaptured.bind(this)}get emailElement(){return this._emailElement||(this._emailElement=this.shadow.querySelector(".input-email")),this._emailElement}get email(){return this.emailElement.value}get minorSource(){return this.data.minorSource||"INLINE"}get submitButton(){return this._submitButton||(this._submitButton=this.shadow.querySelector(".submit-btn")),this._submitButton}get templateType(){return"journey-newsletter"}dispatchJourneySubmittedEvent(){const{journeyEventData:e,email:t}=this,n=N()(t);window.dispatchEvent(new CustomEvent("journey-submitted",{detail:{...e,"email-md5":n}}))}preventStickyVideo(){}handleFocusIn(){}handleSubmit(e){e.preventDefault();const t=this.email&&this.email.trim();return/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(t)?this.subscribeEmail(t,a.cdsOptIn,this.visitorEmailCaptured):this.visitorSubmittedInvalidEmail()}renderContent(e){e&&(super.renderContent(e),this.submitButton.addEventListener("click",this.handleSubmit),this.emailElement.addEventListener("focusin",this.handleFocusIn))}subscribeEmail(e,t,n){var o=this;const{authId:r}=this.data;T(e,r,t,this.minorSource).then(n).catch((function(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("Rufus Error",_(e,"Error submitting to Rufus"),e,o.journeyEventData)}))}visitorEmailCaptured(){this.dispatchJourneySubmittedEvent(),C(this.templateId,a.hoursToHideNewsletter)}visitorSubmittedInvalidEmail(){}}class D extends b{constructor(){super(),this.setBottom=this.setBottom.bind(this)}get adhesionCloseButton(){return this._adhesionCloseButton||(this._adhesionCloseButton=document.querySelector(".mobile-adhesion-unit-close-button")),this._adhesionCloseButton}get adhesionUnit(){return this._adhesionUnit||(this._adhesionUnit=document.querySelector(".mobile-adhesion-unit")),this._adhesionUnit}get containerWrapper(){return this._containerWrapper||(this._containerWrapper=document.querySelector(".journey-container-wrapper")),this._containerWrapper}get displayMode(){return"modal"}get isMobileScreen(){return window.matchMedia("(max-width: 61.1875rem)")}get outerWrapper(){return this._outerWrapper||(this._outerWrapper=this.shadow.querySelector(".outer-wrapper")),this._outerWrapper}attachAdCloseEvent(){this._adCloseEventAttached||!this.adhesionCloseButton||(this.adhesionCloseButton.addEventListener("click",(()=>this.setBottom(!0))),this._adCloseEventAttached=!0)}attachAdUnitEvents(){window.addEventListener("adRendered",(e=>{let{detail:t}=e;"gpt_adhesion"===t.id&&(this.setBottom(),this.attachAdCloseEvent())})),this.attachAdCloseEvent()}attachInViewObserver(){}renderContent(e){e&&(super.renderContent(e),this.containerWrapper.style.pointerEvents="none",this.initialBottom=window.getComputedStyle(this.outerWrapper).getPropertyValue("bottom")||"0px",this.setBottom(),this.isMobileScreen.addEventListener("change",(()=>this.setBottom())),this.attachAdUnitEvents(),window.dispatchEvent(new CustomEvent("journey-inview",{detail:this.journeyEventData})))}setBottom(){let e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];const{containerWrapper:t,initialBottom:n}=this;if(!this.isMobileScreen.matches||e)return void t.style.setProperty("bottom",n);const{adhesionUnit:o}=this;o&&t.style.setProperty("bottom",`calc(${n} + ${o.offsetHeight||0}px)`)}}const O=["scroll","keydown","visibilitychange"],U=O.concat(["mousedown","mousemove","touchstart","touchmove"]),P=O.concat(["pointerdown","pointermove"]);const q=e=>{e.on("playing",e.pause),e.on("ads-ad-started",(()=>{e.ima.pauseAd(),e.ima.addEventListener("resume",e.ima.pauseAd)}))},H=e=>((e,t)=>{const n=document.querySelectorAll(e);if(0===n.length)return{};if(1===n.length)return{element:n[0],num:1};const o=n.length<=t?n.length-1:t;return{element:n[o-1],num:o}})("[data-journey-body=listicle] [data-journey-listicle-introduction] [data-journey-content],[data-journey-body=longform-article]>[data-journey-content],[data-journey-body=recipe] [data-journey-recipe-introduction] [data-journey-content],[data-journey-body=standard-article]>[data-journey-content]",e),M=()=>!!!!p("__NEXT_DATA__.props.appProps.providerData.flags",window,null)?.["content-editor.content-body.preview-blocker"]&&("listicle"===p("journeyData.displayType",window)?!!p("JOURNEY_INFO.previewBlockerSlidePosition",window):!!document.querySelector(".journey-gate")),W={"standard-article":"[data-journey-blur]:not([data-journey-unblur]),[data-journey-body=standard-article]:not([data-journey-unblur])>:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}","longform-article":"[data-journey-blur]:not([data-journey-unblur]),[data-journey-body=longform-article]:not([data-journey-unblur])>:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",recipe:"[data-journey-blur]:not([data-journey-unblur]),[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-article-body]:not([data-journey-unblur])>:not([data-journey-unblur]),[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-introduction]:not([data-journey-unblur])>:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",gallery:"[data-journey-blur]:not([data-journey-unblur]),[data-journey-body=gallery]:not([data-journey-unblur]) [data-journey-content]:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",listicle:"[data-journey-blur]:not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) [data-journey-listicle-introduction]:not([data-journey-unblur])>:not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) [data-journey-listicle-slide]:not([data-journey-unblur]) [data-journey-content]:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}"},R={"standard-article":"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=standard-article]:not([data-journey-unblur])>[data-journey-content]:nth-of-type({preview-num})~:not(journey-inline-blocker):not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}","longform-article":"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=longform-article]:not([data-journey-unblur])>[data-journey-content]:nth-of-type({preview-num})~:not(journey-inline-blocker):not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",recipe:"[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-introduction]:not([data-journey-unblur]),[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-introduction]:not([data-journey-unblur])+div{-webkit-line-clamp:initial;background:0 0;margin-top:0}[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-article-body]:not([data-journey-unblur])>:not([data-journey-unblur]),[data-journey-body=recipe]:not([data-journey-unblur]) [data-journey-recipe-introduction]:not([data-journey-unblur])>[data-journey-content]:nth-of-type({preview-num})~:not(journey-inline-blocker):not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",listicle:"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) [data-journey-listicle-introduction]:not([data-journey-unblur])>[data-journey-content]:nth-of-type({preview-num})~:not(journey-inline-blocker):not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) [data-journey-listicle-slide]:not([data-journey-unblur]) [data-journey-content]:not([data-journey-unblur]){filter:blur(.625rem);pointer-events:none!important;user-select:none!important}"},$={"standard-article":"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=standard-article]:not([data-journey-unblur]) .preview-blocker-scope~:not(journey-inline-blocker):not([data-journey-unblur]),.journey-gate~:not(journey-inline-blocker):not([data-journey-unblur]) {filter:blur(.625rem);pointer-events:none!important;user-select:none!important}","longform-article":"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=longform-article]:not([data-journey-unblur])> .preview-blocker-scope~:not(journey-inline-blocker):not([data-journey-unblur]),.journey-gate~:not(journey-inline-blocker):not([data-journey-unblur]) {filter:blur(.625rem);pointer-events:none!important;user-select:none!important}",listicle:"[data-journey-blur=partial]:not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) journey-inline-blocker~ [data-journey-listicle-slide]:not([data-journey-unblur]) [data-journey-content]:not([data-journey-unblur]),[data-journey-body=listicle]:not([data-journey-unblur]) .preview-blocker-scope ~:not([data-journey-unblur]) [data-journey-listicle-slide]:not([data-journey-unblur]) [data-journey-content]:not([data-journey-unblur]) {filter:blur(.625rem);pointer-events:none!important;user-select:none!important}"},V=e=>{const t=document.createElement("style");t.innerHTML=e,document.body.appendChild(t)},Y=()=>{let e="listicle"===p("journeyData.displayType",window)?document.querySelectorAll("[data-journey-listicle-slide]")[p("JOURNEY_INFO.previewBlockerSlidePosition",window)-1]:document.querySelector(".journey-gate");for(document.querySelectorAll(".preview-blocker-scope").forEach((e=>{e.classList.remove("preview-blocker-scope")}));e.parentNode&&!e.parentNode.hasAttribute("data-journey-body");)e=e.parentNode,e.classList.add("preview-blocker-scope");e.classList.add("preview-blocker-scope")},F=e=>{const t=Number.parseInt(e,10);if(Number.isNaN(t)||0>=t)return void(()=>{const e=p("journeyData.displayType",window),t=W[e];t&&V(t)})();const{num:n}=H(t);return!n||0>=n?void 0:M()?void(()=>{const e=p("journeyData.displayType",window),t=$[e];t&&V(t)})():void(e=>{const t=p("journeyData.displayType",window);let n=R[t];n&&(n=n.replace("{preview-num}",e),V(n))})(n)},J=e=>{F(e),(e=>{e&&document.querySelector(".watch-next-in-body, .embed-video")&&(window.addEventListener("newHearstPlayerInit",(t=>{const{detail:{player:n={}}={}}=t;n.el&&e.contains(n.el())&&q(n)})),window.videojs&&e.querySelectorAll("video[id*='hearstPlayer']").forEach((e=>{const t=window.videojs.getPlayer(e.id);q(t)})))})(document.querySelector("[data-journey-body]"))},z=e=>{const t=p("JOURNEY_INFO.previewBlockerSlidePosition",window),n=document.querySelector("journey-inline-blocker,journey-inline-meter");n&&n.remove();const o=document.querySelectorAll("[data-journey-listicle-slide]")[t-1];o&&(e.setAttribute("data-preview-feature-enabled","true"),o.after(e))},Z=(e,t)=>{if(Y(),"listicle"===p("journeyData.displayType",window))return z(e),void((e,t)=>{const n=()=>{z(e),"journey-inline-blocker"===t&&Y()};window.matchMedia("(max-width: 61.25rem)").addEventListener("change",n),window.addEventListener("app.adApiUpdate",n)})(e,t);const n=document.querySelector(".journey-gate");n&&(n.style.cssText="margin: auto; width: auto;",n.appendChild(e))},X=e=>{p("journeyData.subxEnabled",window,!1)||(e=>{window.JOURNEY_INFO=window.JOURNEY_INFO||{},window.JOURNEY_INFO.status=a.journeyCompletedStatus,window.JOURNEY_INFO.blocked=e||!1,window.JOURNEY_BLOCKED=!!e,window.dispatchEvent(new CustomEvent("journey-info",{detail:window.JOURNEY_INFO}))})(e)},K=()=>{const e=l(a.viewsCookieName);if(!e)return null;const t={},n=(new Date).getTime();return Object.entries(e).forEach((e=>{let[o,r]=e;r.expiryDate<n||(t[o]=r)})),t},Q=(e,t)=>{const n=window.HRST.article.id,o=K();let r;if(!o||!o[e]){const t={...o,[e]:{articles:[n],expiryDate:(new Date).getTime()+24*a.daysToExpirePaywallView*60*60*1e3}};return u(a.viewsCookieName,t,a.daysToExpireViewsCookie),1}const i=o[e].articles;let s=i.length;return i.includes(n)?r=t:((!t||s<t)&&i.push(n),s+=1,r=t+1),u(a.viewsCookieName,o,a.daysToExpireViewsCookie),Math.min(s,r)},G=()=>{const e=p("__NEXT_DATA__.props.appProps.providerData.abTesting.flags",window,null);if(e){const t=e.some((e=>e.startsWith("jam_ab")));t&&d(a.journeyOptimizelyUserIdCookie,s(a.optimizelyUserIdCookie),a.daysToExpireOptimizelyUserIdCookie,`.${m()}`)}},ee={listicle:"[data-journey-listicle-slide]","standard-article":".article-body-content>p","longform-article":".longform-body>p"},te=e=>{const t=document.querySelector(e);if(t){(e=>{const t=document.createElement("style");t.innerHTML=`\n    .journey-gate-hide {\n      position: relative;\n      clear:both;\n      margin-left: -0.938rem;\n      margin-right: -0.938rem;\n    }\n\n    .journey-gate-hide:before {\n      background:linear-gradient(rgba(255,255,255,0), #fff);\n      content:'';\n      height:10rem;\n      left:0;\n      pointer-events: none;\n      position:absolute;\n      top:-10rem;\n      width:100%;\n    }\n\n    .journey-gate-hide ~ * {\n      display: none !important;\n    }\n\n    @media (min-width: 48rem) {\n      .journey-gate-hide{\n         margin-left: 0;\n         margin-right:0;\n      }\n    }\n\n    ${e} {\n      clear: both;\n      text-align: center;\n    }`,document.body.appendChild(t)})(e);const n=document.createElement("div");n.classList.add("journey-gate-hide"),t.before(n);const o=document.querySelector(".content-container");o&&o.appendChild(t)}},ne=e=>{const t=[];return e.forEach((e=>{const{targetSelector:n,paywallId:o,maxPageViews:r,templates:i,previewParagraphsNum:s,pNumAboveInlineTemplate:l}=e;if(o&&r&&i){const t=Q(o,r),a=i.find((e=>{let{pageViews:t}=e;return 1===t})),d=a&&"journey-full-width-newsletter"===a.templateType&&!S(a.templateId)&&t<=r?a:i.find((e=>{let{pageViews:n}=e;return n===t}));e={pNumAboveInlineTemplate:l,previewParagraphsNum:s,view:t,targetSelector:d&&d.targetSelector?d.targetSelector:n,viewsRemaining:r>t?r-t:0,...d}}e.targetElement=document.querySelector(e.targetSelector),(e=>{let{templateId:t,templateType:n,targetSelector:o,targetElement:r}=e;return!(!r||!n)&&!(!t&&"journey-hidden-meter"!==n)&&!(p("JOURNEY_INFO.ads",window,!1)&&a.blockerTemplates.includes(n))&&!("journey-modal-newsletter"===n&&!p("HRST.site.jam-journey-modals-enabled",window,!1))&&!("journey-slim-banner"===n&&"#journey-topnav"===o&&p("__NEXT_DATA__.props.pageProps.data.content.0.metadata.photo_snap_gallery",window,null))&&!("journey-inline-newsletter"===n&&"#journey-inline"===o&&p("__NEXT_DATA__.props.pageProps.data.content.0.metadata.photo_snap_gallery",window,null))&&!(a.hiddenCookieTemplates.includes(n)&&S(t))&&!(p("journeyData.subxEnabled",window,!1)&&a.subxExcludedTemplates.includes(n))&&(!p("journeyData.isLanding",window,!1)||a.landingIncludedTemplates.includes(n))})(e)&&t.push(e)})),t},oe=(e,t)=>{const n=p("journeyData.displayType",window,null),{templateType:o,targetElement:r,pNumAboveInlineTemplate:i,moveNewsletterUp:s}=e,l=(e=>{const{templateId:t,templateType:n,targetSelector:o,view:r,viewsRemaining:i,collapsed:a,pNumAboveInlineTemplate:s,previewParagraphsNum:l}=e,d=document.createElement(n);return d.setAttribute("data-ad-exclude",""),d.setAttribute("data-is-signed-in",p("journeyData.signedIn",window,!1)),d.setAttribute("data-target-selector",o),d.setAttribute("data-template-id",t),window.Number.isInteger(r)&&d.setAttribute("data-view",r),a&&d.setAttribute("data-collapsed",a),window.Number.isInteger(i)&&d.setAttribute("data-views-remaining",i),("journey-modal-newsletter"===n||"journey-slim-banner"===n)&&d.setAttribute("aria-hidden",!0),window.Number.isInteger(s)&&d.setAttribute("data-preview-paragraphs-number",s),window.Number.isInteger(l)&&d.setAttribute("data-preview-paragraphs-number",l),d})(e);return"journey-modal-newsletter"===o?void document.body.appendChild(l):"journey-inline-newsletter"===o&&!t&&a.movableNewsletterDisplayTypes.includes(n)&&s?void((e,t)=>{const n=p("journeyData.displayType",window,null);e.setAttribute("data-display-type",n);const o=document.querySelectorAll(ee[n]),r=o.length;let i=o[Math.floor(r/2)-1];const s="desktop"===p("journeyData.deviceType",window);"listicle"===n&&s&&i.nextSibling&&"SECTION"!==i.nextSibling.tagName&&(i=o[Math.floor(r/2)]),("listicle"===n?9>=o.length:10>=o.length||i.offsetHeight<(768>window.innerWidth?155:95)||"P"!==i.nextSibling.tagName)?(t.appendChild(e),e.setAttribute("move-inline-newsletter-up",a.newsletterIsIneligibleToMove)):(i.after(e),e.setAttribute("move-inline-newsletter-up",a.newsletterIsMoved))})(l,r):"journey-inline-blocker"===o||"journey-inline-meter"===o?void((e,t,n)=>{if(M())return void Z(e,n);const{element:o}=H(t);o&&o.after(e)})(l,i,o):void r.appendChild(l)},re=(e,t)=>e.find((e=>t.includes(e.templateType))),ie=(()=>{let e=!1;return t=>{if(!e){const{siteId:n,...o}=t||{};n&&(e=!0,c(a.membershipAttributionCookie,y),((e,t)=>{const n=new URLSearchParams(window.location.search).get("journey_version");return n&&(t.journey_version=n),fetch(`${a.jamUrl}/rules/match/${e}?${new URLSearchParams(t).toString()}`)})(n,o).then((e=>e.ok?void e.json().then((e=>{let{data:t}=e;return t?void(e=>{const t=ne(e);re(t,a.promotionCookiesTemplates)||w();const n=re(t,a.blockerTemplates);let o;if(n){const{templateType:e,previewParagraphsNum:t}=n;o="journey-inline-blocker"===e||t?"partial":"full"}X(o),G();const r=t.findIndex((e=>"journey-inline-newsletter"===e.templateType));if(n&&-1!==r){const e=t[r];t.splice(r,1),t.unshift(e)}const i=t.find((e=>"journey-inline-meter"===e.templateType||"journey-inline-blocker"===e.templateType));t.forEach((e=>oe(e,i)))})(t):(X(),void w())})):(X(),void w()))))}}})();customElements.define("journey-template",b),customElements.define("journey-content-gate",class extends b{constructor(){super(),this.connectedCallBackCalled=!1}get templateType(){return"journey-content-gate"}connectedCallback(){if(!this.connectedCallBackCalled){super.connectedCallback(),this.connectedCallBackCalled=!0;const{targetSelector:e}=this;window.dispatchEvent(new CustomEvent("journey-hide-content",{detail:{targetSelector:e}}))}}}),customElements.define("journey-blocker",class extends b{get templateType(){return"journey-blocker"}get previewParagraphsNum(){return Number.parseInt(this.getAttribute("data-preview-paragraphs-number"),10)||0}connectedCallback(){super.connectedCallback();const{previewParagraphsNum:e}=this;window.dispatchEvent(new CustomEvent("journey-blur-content",{detail:{previewParagraphsNum:e}}))}}),customElements.define("journey-inline-blocker",class extends b{get previewParagraphsNum(){return Number.parseInt(this.getAttribute("data-preview-paragraphs-number"),10)||0}get templateType(){return"journey-inline-blocker"}get isPreviewFeatureEnabled(){return"true"===this.getAttribute("data-preview-feature-enabled")}get outerWrapper(){return this._outerWrapper||(this._outerWrapper=this.shadow.querySelector(".outer-wrapper")),this._outerWrapper}activatePreviewFeature(){this.isPreviewFeatureEnabled&&this.outerWrapper.classList.add("preview-feature-active")}connectedCallback(){if(!this.connectedCallBackCalled){this.connectedCallBackCalled=!0,super.connectedCallback();const{previewParagraphsNum:e}=this;window.dispatchEvent(new CustomEvent("journey-blur-content",{detail:{previewParagraphsNum:e}}))}}renderContent(e){e&&(super.renderContent(e),this.activatePreviewFeature())}}),customElements.define("journey-inline-meter",class extends b{get templateType(){return"journey-inline-meter"}get isPreviewFeatureEnabled(){return"true"===this.getAttribute("data-preview-feature-enabled")}get outerWrapper(){return this._outerWrapper||(this._outerWrapper=this.shadow.querySelector(".outer-wrapper")),this._outerWrapper}activatePreviewFeature(){this.isPreviewFeatureEnabled&&this.outerWrapper.classList.add("preview-feature-active")}connectedCallback(){this.connectedCallBackCalled||(this.connectedCallBackCalled=!0,super.connectedCallback())}renderContent(e){e&&(super.renderContent(e),this.activatePreviewFeature())}}),customElements.define("journey-collapsible-meter",class extends b{constructor(){super(),this.collapseContent=this.collapseContent.bind(this),this.expandContent=this.expandContent.bind(this)}get collapseButton(){return this._collapseButton||(this._collapseButton=this.shadow.querySelector("#collapse-btn")),this._collapseButton}get collapsedSection(){return this._collapsedSection||(this._collapsedSection=this.shadow.querySelector(".collapsed-section")),this._collapsedSection}get expandButton(){return this._expandButton||(this._expandButton=this.shadow.querySelector("#expand-btn")),this._expandButton}get expandedSection(){return this._expandedSection||(this._expandedSection=this.shadow.querySelector(".expanded-section")),this._expandedSection}get isExpanded(){return this.templateOuterWrapper.classList.contains("expanded")}get templateOuterWrapper(){return this._templateOuterWrapper||(this._templateOuterWrapper=this.shadow.querySelector(".template-outer-wrapper")),this._templateOuterWrapper}get templateType(){return"journey-collapsible-meter"}toggleCollapse(e){const{templateOuterWrapper:t}=this;t.classList.toggle("collapsed",e),t.classList.toggle("expanded",!e)}setHeight(){const{templateOuterWrapper:e,isExpanded:t}=this;e.style.maxHeight=`${t?this.expandedSection.offsetHeight:this.collapsedSection.offsetHeight}px`}collapseContent(){this.toggleCollapse(!0),this.setHeight()}expandContent(){this.toggleCollapse(!1),this.setHeight()}renderContent(e){if(!e)return null;super.renderContent(e);const{collapseButton:t,expandButton:n,collapsed:o,isExpanded:r}=this;return t.addEventListener("click",this.collapseContent),n.addEventListener("click",this.expandContent),j(this.collapseContent,a.collapseScrollThreshold),r&&!o?this.expandContent():this.collapseContent()}}),customElements.define("journey-modal-meter",class extends D{constructor(){super(),this.toggleContent=this.toggleContent.bind(this)}get collapsedSection(){return this._collapsedSection||(this._collapsedSection=this.shadow.querySelector(".collapsed-section")),this._collapsedSection}get expandButton(){return this._expandButton||(this._expandButton=this.shadow.querySelector("#control-btn")),this._expandButton}get expandedSection(){return this._expandedSection||(this._expandedSection=this.shadow.querySelector(".expanded-section")),this._expandedSection}get isExpanded(){return this.outerWrapper.classList.contains("expanded")}get templateType(){return"journey-modal-meter"}setHeight(){const{outerWrapper:e,isExpanded:t}=this;e.style.maxHeight=`${t?this.expandedSection.offsetHeight:this.collapsedSection.offsetHeight}px`}toggleCollapse(e){const{outerWrapper:t}=this;t.classList.toggle("collapsed",e),t.classList.toggle("expanded",!e)}toggleContent(){const{isExpanded:e}=this;this.toggleCollapse(e),this.setHeight()}renderContent(e){e&&(super.renderContent(e),this.expandButton.addEventListener("click",this.toggleContent),this.setHeight(),j((()=>{this.toggleCollapse(!0),this.setHeight()}),a.collapseScrollThreshold))}}),customElements.define("journey-modal-blocker",class extends D{get templateType(){return"journey-modal-blocker"}connectedCallback(){super.connectedCallback(),window.dispatchEvent(new CustomEvent("journey-blur-content"))}}),customElements.define("journey-slim-banner",class extends b{constructor(){super(),this.close=this.close.bind(this),this.open=this.open.bind(this)}get templateType(){return"journey-slim-banner"}get closeButton(){return this._closeButton||(this._closeButton=this.shadow.querySelector(".close-button")),this._closeButton}close(){const{hoursToHideAfterView:e}=this.data;0<e&&C(this.templateId,e),this.dispatchJourneyClosedEvent(),this.remove()}addCloseListener(){this.closeButton&&this.closeButton.addEventListener("click",this.close)}open(){this.removeAttribute("aria-hidden")}renderContent(e){if(e){super.renderContent(e),this.addCloseListener();const{isDelayed:t}=this.data;t?g(this.open,1e3*a.idleTime)():this.open()}}}),customElements.define("journey-hidden-meter",class extends b{get templateType(){return"journey-hidden-meter"}connectedCallback(){}}),customElements.define("journey-inline-newsletter",class extends B{get mainSection(){return this._mainSection||(this._mainSection=this.shadow.querySelector(".main-section")),this._mainSection}get thankYouContainer(){return this._thankYouContainer||(this._thankYouContainer=this.shadow.querySelector(".thank-you-container")),this._thankYouContainer}get templateType(){return"journey-inline-newsletter"}handleFocusIn(){this.mainSection.classList.remove("error")}visitorEmailCaptured(){const{mainSection:e,thankYouContainer:t,submitButton:n}=this;e.style.display="none",t.style.display="block",n.blur(),super.visitorEmailCaptured()}visitorSubmittedInvalidEmail(){super.visitorSubmittedInvalidEmail(),this.mainSection.classList.add("error")}}),customElements.define("journey-modal-newsletter",class extends B{constructor(){super(),this.open=this.open.bind(this),this.close=this.close.bind(this),this.keydownEventHandler=this.keydownEventHandler.bind(this)}get activityEvents(){return window.PointerEvent?P:U}set ariaHidden(e){return e?void this.setAttribute("aria-hidden",!0):void this.removeAttribute("aria-hidden")}get cancelButton(){return this._cancelButton||(this._cancelButton=this.shadow.querySelector("#cancel-button")),this._cancelButton}get closeButton(){return this._closeButton||(this._closeButton=this.shadow.querySelector(".modal-close")),this._closeButton}get displayMode(){return"modal"}get errorMessage(){return this._errorMessage||(this._errorMessage=this.shadow.querySelector(".error-message")),this._errorMessage}get focusable(){return this._focusable||(this._focusable=Array.from(this.shadow.querySelectorAll('a[href], input:not([disabled]), button:not([disabled]), [tabindex="0"]'))),this._focusable}get minorSource(){return this.data.minorSource||"MODAL"}get overlay(){return this._overlay||(this._overlay=this.shadow.querySelector(".modal-overlay")),this._overlay}get templateType(){return"journey-modal-newsletter"}attachInViewObserver(){}close(){this.ariaHidden=!0,this.lastActiveElement&&this.lastActiveElement.focus(),document.removeEventListener("keydown",this.keydownEventHandler),window.dispatchEvent(new CustomEvent("journey-modal-close",{detail:this.journeyEventData}))}handleFocusIn(){super.handleFocusIn(),this.errorMessage.style.display="none"}keydownEventHandler(e){if("Escape"===e.key)return void this.close(e);if("Tab"!==e.key)return;const{focusable:t}=this,{0:n,[t.length-1]:o}=t;e.shiftKey&&this.shadow.activeElement===n?(o.focus(),e.preventDefault()):this.shadow.activeElement===o&&(n.focus(),e.preventDefault())}open(){this.lastActiveElement=document.activeElement,this.unbindActivityEvents(),window.journeyModalOpened||S(this.templateId)||(window.journeyModalOpened=!0,document.addEventListener("keydown",this.keydownEventHandler),this.ariaHidden=!1,this.emailElement.focus(),window.dispatchEvent(new CustomEvent("journey-inview",{detail:this.journeyEventData})),window.dispatchEvent(new CustomEvent("journey-modal-open",{detail:this.journeyEventData})),C(this.templateId,a.hoursToHideModalNewsletterAfterView))}addCloseListeners(){this.cancelButton.addEventListener("click",this.close),this.closeButton.addEventListener("click",this.close),this.overlay.addEventListener("click",this.close)}renderContent(e){if(e){super.renderContent(e),this.addCloseListeners();const t=this.data.idleTime||a.idleTime;this.resetIdleTimer=g(this.open,1e3*t),this.startIdleTimer()}}startIdleTimer(){this.activityEvents.forEach((e=>document.addEventListener(e,this.resetIdleTimer,{capture:!0,passive:!0}))),this.resetIdleTimer()}unbindActivityEvents(){this.activityEvents.forEach((e=>document.removeEventListener(e,this.resetIdleTimer,{capture:!0,passive:!0})))}visitorEmailCaptured(){this.close(),super.visitorEmailCaptured()}visitorSubmittedInvalidEmail(){super.visitorSubmittedInvalidEmail(),this.errorMessage.style.display="block"}}),customElements.define("journey-collapsible-newsletter",class extends B{constructor(){super(),this.displayThankYouMessage=this.displayThankYouMessage.bind(this),this.collapseContent=this.collapseContent.bind(this),this.expandContent=this.expandContent.bind(this),this.close=this.close.bind(this)}get closeButton(){return this._closeButton||(this._closeButton=this.shadow.querySelector("#close-btn")),this._closeButton}get collapseButton(){return this._collapseButton||(this._collapseButton=this.shadow.querySelector("#collapse-btn")),this._collapseButton}get collapsedSection(){return this._collapsedSection||(this._collapsedSection=this.shadow.querySelector(".collapsed-section")),this._collapsedSection}get expandButton(){return this._expandButton||(this._expandButton=this.shadow.querySelector("#expand-btn")),this._expandButton}get expandedSection(){return this._expandedSection||(this._expandedSection=this.shadow.querySelector(".expanded-section")),this._expandedSection}get isConfirmed(){return this.templateOuterWrapper.classList.contains("confirmed")}get isExpanded(){return this.templateOuterWrapper.classList.contains("expanded")}get mainSection(){return this._mainSection||(this._mainSection=this.shadow.querySelector(".main-section")),this._mainSection}get templateOuterWrapper(){return this._templateOuterWrapper||(this._templateOuterWrapper=this.shadow.querySelector(".template-outer-wrapper")),this._templateOuterWrapper}get templateType(){return"journey-collapsible-newsletter"}get thankYouContainer(){return this._thankYouContainer||(this._thankYouContainer=this.shadow.querySelector(".thank-you-container")),this._thankYouContainer}close(){this.templateOuterWrapper.style.display="none"}collapseContent(){this.toggleStatus("collapsed")}displayThankYouMessage(){this.toggleStatus("confirmed"),setTimeout(this.close,1e4)}expandContent(){this.toggleStatus("expanded")}handleFocusIn(){this.mainSection.classList.remove("error")}renderContent(e){e&&(super.renderContent(e),j(this.collapseContent,a.collapseScrollThreshold),this.closeButton.addEventListener("click",this.close),this.collapseButton.addEventListener("click",this.collapseContent),this.expandButton.addEventListener("click",this.expandContent),(this.isExpanded&&!this.collapsed?this.expandContent:this.collapseContent)())}setHeight(e){const{templateOuterWrapper:t}=this;t.style.maxHeight=`${"expanded"===e?this.expandedSection.offsetHeight:this.collapsedSection.offsetHeight}px`}toggleStatus(e){const{templateOuterWrapper:t,isConfirmed:n}=this;n||(t.classList.toggle("collapsed","collapsed"===e),t.classList.toggle("expanded","expanded"===e),t.classList.toggle("confirmed","confirmed"===e),this.setHeight(e))}visitorEmailCaptured(){this.displayThankYouMessage(),super.visitorEmailCaptured()}visitorSubmittedInvalidEmail(){this.mainSection.classList.add("error"),super.visitorSubmittedInvalidEmail()}}),customElements.define("journey-full-width-newsletter",class extends B{constructor(){super(),this.open=this.open.bind(this),this.close=this.close.bind(this),this.adStickinessEventHandler=this.adStickinessEventHandler.bind(this),this.startTimer=this.startTimer.bind(this)}set ariaHidden(e){return e?void this.setAttribute("aria-hidden",!0):void this.removeAttribute("aria-hidden")}get closeButtons(){return this._closeButtons||(this._closeButtons=this.shadow.querySelectorAll(".close-button")),this._closeButtons}get thankYouContainer(){return this._thankYouContainer||(this._thankYouContainer=this.shadow.querySelector(".thank-you-container")),this._thankYouContainer}get mainSection(){return this._mainSection||(this._mainSection=this.shadow.querySelector(".main-section")),this._mainSection}get errorMessage(){return this._errorMessage||(this._errorMessage=this.shadow.querySelector(".error-message")),this._errorMessage}get minorSource(){return this.data.minorSource||"FULL WIDTH"}get displayMode(){return"modal"}get templateType(){return"journey-full-width-newsletter"}get isSubmitted(){return this._isSubmitted}set isSubmitted(e){this._isSubmitted=e}attachInViewObserver(){}handleFocusIn(){this.errorMessage.style.display="none"}dispatchJourneyInViewEvent(){window.dispatchEvent(new CustomEvent("journey-inview",{detail:this.journeyEventData}))}toggleView(e){this.ariaHidden=e,e||this.inViewDispatched||(this.dispatchJourneyInViewEvent(),this.inViewDispatched=!0)}adStickinessEventHandler(e){this.toggleView(e.detail)}open(){S(this.templateId)||(window.addEventListener("ad-stickiness",this.adStickinessEventHandler),!document.querySelector(".vjs-sticky")&&this.toggleView(!1))}close(){this.isSubmitted||(C(this.templateId,a.hoursToHideModalNewsletterAfterView),this.dispatchJourneyClosedEvent()),window.removeEventListener("ad-stickiness",this.adStickinessEventHandler),this.remove()}addCloseListeners(){this.closeButtons.forEach((e=>{e.addEventListener("click",this.close)}))}visitorEmailCaptured(){super.visitorEmailCaptured();const{mainSection:e,thankYouContainer:t}=this;e.style.display="none",t.style.display="flex",this.isSubmitted=!0,g(this.close,1e3*a.thankYouContainerSecToHide)()}visitorSubmittedInvalidEmail(){super.visitorSubmittedInvalidEmail(),this.errorMessage.style.display="block"}startTimer(){const e=this.data.idleTime||30;return g(this.open,1e3*e)()}renderContent(e){e&&(this.ariaHidden=!0,super.renderContent(e),this.addCloseListeners(),this.startTimer())}}),ie(window.journeyData),window.addEventListener("journey-init",(()=>ie(window.journeyData))),window.addEventListener("journey-hide-content",(e=>{let{detail:t}=e;return te(t.targetSelector)})),window.addEventListener("journey-blur-content",(e=>{let{detail:t}=e;if(!p("journeyData.subxEnabled",window,!1)){const{previewParagraphsNum:e}=t||{};J(e)}})),window.addEventListener("journey-modal-open",(()=>{document.documentElement.classList.add("no-scroll")})),window.addEventListener("journey-modal-close",(()=>{const e=document.querySelector("#sidepanel");(!e||e.classList.contains("hidden"))&&document.documentElement.classList.remove("no-scroll")}))})()})();